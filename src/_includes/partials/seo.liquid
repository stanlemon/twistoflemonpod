{% assign canonical_path = canonicalUrl | default: page.url %}
{% if canonical_path contains '?' %}
{% assign canonical_path = canonical_path | split: '?' | first %}
{% endif %}
{% if canonical_path contains '#' %}
{% assign canonical_path = canonical_path | split: '#' | first %}
{% endif %}
{% if canonical_path == '' %}
{% assign canonical_path = '/' %}
{% endif %}
{% if canonical_path contains '://' %}
{% assign canonical_url = canonical_path %}
{% else %}
{% assign canonical_url = site.url | append: canonical_path %}
{% endif %}
{% assign meta_title = title | default: site.title %}
{% assign meta_description = summary | default: description | default: site.description %}

<title>{{ meta_title }}</title>
<meta name="description" content="{{ meta_description }}">
<meta name="author" content="{{ site.author.name }}">
<meta name="keywords" content="podcast, technology, finance, life, craftsmanship, theology{% if keywords and keywords.size > 0 %}, {{ keywords | join: ', ' }}{% elsif tags %}, {{ tags | join: ', ' }}{% endif %}">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{% if layout == 'layouts/post.liquid' %}article{% else %}website{% endif %}">
<meta property="og:url" content="{{ canonical_url }}">
<meta property="og:title" content="{{ meta_title }}">
<meta property="og:description" content="{{ meta_description }}">
<meta property="og:image" content="{{ site.url }}/images/logo.png">
<meta property="og:image:secure_url" content="{{ site.url }}/images/logo.png">
<meta property="og:image:alt" content="{{ site.title }} Logo">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:site_name" content="{{ site.title }}">
<meta property="og:locale" content="en_US">
{% if layout == 'layouts/post.liquid' and enclosure and enclosure.url %}
<meta property="og:audio" content="{{ enclosure.url }}">
<meta property="og:audio:type" content="{{ enclosure.type | default: 'audio/mpeg' }}">
{% endif %}
{% if layout == 'layouts/post.liquid' and keywords and keywords.size > 0 %}
{% for keyword in keywords %}
<meta property="article:tag" content="{{ keyword }}">
{% endfor %}
{% endif %}

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@{{ site.social.twitter }}">
<meta name="twitter:creator" content="@{{ site.social.twitter }}">
<meta name="twitter:url" content="{{ canonical_url }}">
<meta name="twitter:title" content="{{ meta_title }}">
<meta name="twitter:description" content="{{ meta_description }}">
<meta name="twitter:image" content="{{ site.url }}/images/logo.png">
<meta name="twitter:image:alt" content="{{ site.title }} Logo">

<!-- Canonical URL -->
<link rel="canonical" href="{{ canonical_url }}">

<!-- RSS Feed Auto-Discovery -->
<link rel="alternate" type="application/rss+xml" title="{{ site.title }} RSS Feed" href="{{ site.url }}/feed.xml">
